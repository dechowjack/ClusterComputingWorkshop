

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Workshop P2 - Slurm Basics &mdash; Cluster Computing Workshop 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=9edc463e" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Workshop P3 - Complex Jobs in Slurm" href="P3_ComplexJobs.html" />
    <link rel="prev" title="Workshop P1 - Cluster Computing Basics" href="P1_Basics.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Cluster Computing Workshop
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">About the Cluster Computing Workshop</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Workshop Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="P1_Basics.html">Workshop P1 - Cluster Computing Basics</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Workshop P2 - Slurm Basics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-slurm">1. What is SLURM?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-is-a-job">2. What is a job?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#submitting-a-job">2.1 Submitting a job</a></li>
<li class="toctree-l3"><a class="reference internal" href="#job-status-codes">2.2 Job Status Codes:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#basic-slurm-commands">3. Basic Slurm Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="P3_ComplexJobs.html">Workshop P3 - Complex Jobs in Slurm</a></li>
<li class="toctree-l1"><a class="reference internal" href="GitSetup.html">UNC Cluster Computing Workshop - Git Setup Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Sheets</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="refs/REF_Commands.html">Linux + Slurm Commands Reference Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="refs/REF_Flags.html">Linux + Slurm Flags Reference Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="refs/REF_SBATCH_Directives.html">Slurm SBATCH Directive Reference Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="refs/REF_SlurmJobStatus.html">Slurm Job Status Reference Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="refs/REF_ExitCodes.html">Slurm Exit Code Reference Sheet</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Cluster Computing Workshop</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Workshop P2 - Slurm Basics</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/P2_Slurm.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="workshop-p2-slurm-basics">
<h1>Workshop P2 - Slurm Basics<a class="headerlink" href="#workshop-p2-slurm-basics" title="Link to this heading"></a></h1>
<section id="what-is-slurm">
<h2>1. What is SLURM?<a class="headerlink" href="#what-is-slurm" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Simple</span> <span class="pre">Linux</span> <span class="pre">Utility</span> <span class="pre">for</span> <span class="pre">Resource</span> <span class="pre">Management</span></code> or <code class="docutils literal notranslate"><span class="pre">Slurm</span></code> for short, is a job scheduling software used on HPC clusters. The primary job of Slurm is to manage and allocate resources between many users. It decides when jobs start, allocates the correct resources for a job, and tracks resources to make sure every job uses distinct GPUs and CPUs.</p>
</section>
<section id="what-is-a-job">
<h2>2. What is a job?<a class="headerlink" href="#what-is-a-job" title="Link to this heading"></a></h2>
<p>A job is any shell script i.e. <code class="docutils literal notranslate"><span class="pre">job.sh</span></code> that contains lines of code that specify:</p>
<ol class="arabic simple">
<li><p>How many resources you need for your job</p></li>
<li><p>What exactly you want to run</p></li>
<li><p>Where to send the results of the job</p></li>
</ol>
<p>Slurm jobs start with a <code class="docutils literal notranslate"><span class="pre">shebang</span></code>, a line of code that tells the computer what language your script is written in, and what interpreter the computer should use to read the script. There are several shell scripting languages, but the most common is <code class="docutils literal notranslate"><span class="pre">bash</span></code>. The bash <code class="docutils literal notranslate"><span class="pre">shebang</span></code> is: <code class="docutils literal notranslate"><span class="pre">#!/bin/bash</span></code>. Below is an example job script <code class="docutils literal notranslate"><span class="pre">test.job</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH -J testjob          </span>
<span class="c1">#SBATCH -p LocalQ          </span>
<span class="c1">#SBATCH -t 00:10:00         </span>
<span class="c1">#SBATCH --ntasks=1         </span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Hello from Slurm!&quot;</span>
</pre></div>
</div>
<p>This job script starts with the shebang <code class="docutils literal notranslate"><span class="pre">#!/bin/bash</span></code> that tells the computer we are working in <code class="docutils literal notranslate"><span class="pre">bash</span></code>. Every job script script should start with the <code class="docutils literal notranslate"><span class="pre">shebang</span></code>. The next four lines contain lines of code that look like comments, but are actually called <code class="docutils literal notranslate"><span class="pre">directives</span></code> and are part of <code class="docutils literal notranslate"><span class="pre">slurm</span></code>. Normally, any line in a <code class="docutils literal notranslate"><span class="pre">bash</span></code> script that starts with <code class="docutils literal notranslate"><span class="pre">#</span></code> would be interpeted as a comment and not run. But with the <code class="docutils literal notranslate"><span class="pre">#SBATCH</span></code> directive, it is still seen by <code class="docutils literal notranslate"><span class="pre">slurm</span></code> and interpeted as a config command. Let’s break these down</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#SBATCH</span> <span class="pre">-J</span> <span class="pre">testjob</span></code>         This tells <code class="docutils literal notranslate"><span class="pre">slurm</span></code> to name the job <code class="docutils literal notranslate"><span class="pre">testjob</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#SBATCH</span> <span class="pre">-p</span> <span class="pre">LocalQ</span></code>          This tells <code class="docutils literal notranslate"><span class="pre">slurm</span></code> with partition to run on</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#SBATCH</span> <span class="pre">-t</span> <span class="pre">00:10:00</span></code>        This gives a the job a time limit of 10 minutes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#SBATCH</span> <span class="pre">--ntasks=1</span></code>         This requests a single CPU core</p></li>
</ul>
<section id="submitting-a-job">
<h3>2.1 Submitting a job<a class="headerlink" href="#submitting-a-job" title="Link to this heading"></a></h3>
<p>Let’s see how we would actually submit a job, and what the output from <code class="docutils literal notranslate"><span class="pre">slurm</span></code> would look like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jldechow@river:~$<span class="w"> </span>sbatch<span class="w"> </span>test.job
Submitted<span class="w"> </span>batch<span class="w"> </span>job<span class="w"> </span><span class="m">28</span>
jldechow@river:~$<span class="w"> </span>squeue<span class="w"> </span>
<span class="w">             </span>JOBID<span class="w"> </span>PARTITION<span class="w">     </span>NAME<span class="w">     </span>USER<span class="w"> </span>ST<span class="w">       </span>TIME<span class="w">  </span>NODES<span class="w"> </span>NODELIST<span class="o">(</span>REASON<span class="o">)</span>
<span class="w">                </span><span class="m">28</span><span class="w">    </span>LocalQ<span class="w">  </span>TestJob<span class="w">  </span>jldechow<span class="w">  </span>PD<span class="w">       </span><span class="m">0</span>:00<span class="w">      </span><span class="m">1</span><span class="w"> </span>river.emes.unc.edu
</pre></div>
</div>
<p>Now, let’s break down what has happened line by line:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sbatch</span> <span class="pre">test.job</span></code>         We use <code class="docutils literal notranslate"><span class="pre">sbatch</span></code> to submit job <code class="docutils literal notranslate"><span class="pre">test.job</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Submitted</span> <span class="pre">batch</span> <span class="pre">job</span> <span class="pre">28</span></code>          Slurm reports our job was submitted with <code class="docutils literal notranslate"><span class="pre">JOBID</span></code> = <code class="docutils literal notranslate"><span class="pre">28</span></code></p></li>
</ul>
<p>Next, we ran <code class="docutils literal notranslate"><span class="pre">squeue</span></code> to see our job in the queue and slurm reports back a variety of pieces of information. Let’s look at those now:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">JOBID:</span> <span class="pre">28</span></code>                       Slurm has given our job the <code class="docutils literal notranslate"><span class="pre">JOBID</span></code> of <code class="docutils literal notranslate"><span class="pre">28</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PARITITION:</span> <span class="pre">LocalQ</span></code>              Slurm is running our job on the <code class="docutils literal notranslate"><span class="pre">LocalQ</span></code> partition</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NAME:</span> <span class="pre">TestJob</span></code>                   Our job is named <code class="docutils literal notranslate"><span class="pre">TestJob</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">USER:</span> <span class="pre">jldechow</span></code>                  This job was submitted by user <code class="docutils literal notranslate"><span class="pre">jldechow</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ST:</span> <span class="pre">PD</span></code>                          The jobs current status is <code class="docutils literal notranslate"><span class="pre">PD</span></code> aka <code class="docutils literal notranslate"><span class="pre">Pending</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TIME:</span> <span class="pre">0:00</span></code>                      This job has ran for <code class="docutils literal notranslate"><span class="pre">0:00</span></code> since it is still pending</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NODES:</span> <span class="pre">1</span></code>                        This job is running on node 1 (River only has 1 node)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NODELIST:</span> <span class="pre">river.emes.unc.edu</span></code>    Node 1 is named <code class="docutils literal notranslate"><span class="pre">river.emes.unc.edu</span></code></p></li>
</ul>
</section>
<section id="job-status-codes">
<h3>2.2 Job Status Codes:<a class="headerlink" href="#job-status-codes" title="Link to this heading"></a></h3>
<p>Here is a list of job common job status codes:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Code</p></th>
<th class="head"><p>Status</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PD</p></td>
<td><p>Pending</p></td>
<td><p>The job is awaiting resource allocation and has not yet started execution.</p></td>
</tr>
<tr class="row-odd"><td><p>R</p></td>
<td><p>Running</p></td>
<td><p>The job currently has an allocation and is actively executing on the assigned nodes.</p></td>
</tr>
<tr class="row-even"><td><p>CD</p></td>
<td><p>Completed</p></td>
<td><p>The job has successfully terminated all processes on all allocated nodes and completed its execution.</p></td>
</tr>
<tr class="row-odd"><td><p>F</p></td>
<td><p>Failed</p></td>
<td><p>The job terminated with a non-zero exit code or encountered another failure condition during execution.</p></td>
</tr>
<tr class="row-even"><td><p>CG</p></td>
<td><p>Completing</p></td>
<td><p>The job is in the process of completing, but some processes on some nodes may still be active.</p></td>
</tr>
<tr class="row-odd"><td><p>CA</p></td>
<td><p>Cancelled</p></td>
<td><p>The job was explicitly cancelled by the user or a system administrator.</p></td>
</tr>
<tr class="row-even"><td><p>CF</p></td>
<td><p>Configuring</p></td>
<td><p>The job has been allocated resources, but is waiting for them to become ready for use (e.g., booting up).</p></td>
</tr>
<tr class="row-odd"><td><p>S</p></td>
<td><p>Suspended</p></td>
<td><p>The job has an allocation, but its execution has been temporarily suspended.</p></td>
</tr>
<tr class="row-even"><td><p>ST</p></td>
<td><p>Stopped</p></td>
<td><p>The job has been stopped, but its cores are retained, unlike a suspended job which releases its cores.</p></td>
</tr>
<tr class="row-odd"><td><p>TO</p></td>
<td><p>Timeout</p></td>
<td><p>The job reached its allocated time limit and was terminated.</p></td>
</tr>
<tr class="row-even"><td><p>OOM</p></td>
<td><p>Out of Memory</p></td>
<td><p>The job terminated due to an out-of-memory error.</p></td>
</tr>
<tr class="row-odd"><td><p>NF</p></td>
<td><p>Node Fail</p></td>
<td><p>The job terminated due to the failure of one or more allocated nodes.</p></td>
</tr>
<tr class="row-even"><td><p>PR</p></td>
<td><p>Preempted</p></td>
<td><p>The job was terminated by another job, typically due to a higher priority or resource requirement.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="basic-slurm-commands">
<h2>3. Basic Slurm Commands<a class="headerlink" href="#basic-slurm-commands" title="Link to this heading"></a></h2>
<p>Much like the generic command line utilities discussed in P1, slurm has its own commands that you can use to start, check on, or cancel jobs. Below we will show the most common and useful ones</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Command</strong></p></th>
<th class="head"><p><strong>Purpose</strong></p></th>
<th class="head"><p><strong>Example Usage</strong></p></th>
<th class="head"><p><strong>Explanation</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sbatch</span></code></p></td>
<td><p>Submit a job script to the queue</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sbatch</span> <span class="pre">myjob.sh</span></code></p></td>
<td><p>Sends your job script to Slurm to run when resources are available.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">squeue</span></code></p></td>
<td><p>View the job queue</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">squeue</span> <span class="pre">-u</span> <span class="pre">$USER</span></code></p></td>
<td><p>Shows which jobs are running or waiting (for your user or everyone).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">scancel</span></code></p></td>
<td><p>Cancel a running or pending job</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">scancel</span> <span class="pre">12345</span></code></p></td>
<td><p>Stops the job with ID <code class="docutils literal notranslate"><span class="pre">12345</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sinfo</span></code></p></td>
<td><p>View node and partition (queue) status</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sinfo</span></code></p></td>
<td><p>Displays what parts of the cluster are available, busy, or down.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">srun</span></code></p></td>
<td><p>Run a command interactively or in parallel</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">srun</span> <span class="pre">hostname</span></code></p></td>
<td><p>Starts a command directly through Slurm (often used inside job scripts).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sacct</span></code></p></td>
<td><p>View job history and resource usage</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sacct</span> <span class="pre">-j</span> <span class="pre">12345</span></code></p></td>
<td><p>Shows runtime, CPU, and memory use for a finished job.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">module</span></code></p></td>
<td><p>Load software environments</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">julia</span></code></p></td>
<td><p>Loads software packages or environments available on the cluster.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ssh</span></code></p></td>
<td><p>Connect to remote servers or nodes</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">user&#64;cluster.edu</span></code></p></td>
<td><p>Connects securely to the cluster login node</p></td>
</tr>
</tbody>
</table>
<p>Many cluster commands become much more useful when paired with flags, which are options that modify behavior. For example, running <code class="docutils literal notranslate"><span class="pre">squeue</span></code>will show every job on the entire cluster, which often is not very useful.To see only your own jobs, you can add the <code class="docutils literal notranslate"><span class="pre">-u</span></code> flag followed by your username:<code class="docutils literal notranslate"><span class="pre">squeue</span> <span class="pre">-u</span> <span class="pre">jldechow</span></code>. Here, <code class="docutils literal notranslate"><span class="pre">-u</span></code> means <code class="docutils literal notranslate"><span class="pre">user</span></code>, so this command lists all jobs currently running or waiting that belong to user <code class="docutils literal notranslate"><span class="pre">jldechow</span></code>. Similarly, if you accidentally submit several jobs or lose track of your job IDs, you can cancel all your jobs at once with <code class="docutils literal notranslate"><span class="pre">scancel</span> <span class="pre">-u</span> <span class="pre">jldechow</span></code>. This tells Slurm to stop every job associated with user <code class="docutils literal notranslate"><span class="pre">jldechow</span></code>, saving you from hunting down each individual <code class="docutils literal notranslate"><span class="pre">$JOBID</span></code>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="P1_Basics.html" class="btn btn-neutral float-left" title="Workshop P1 - Cluster Computing Basics" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="P3_ComplexJobs.html" class="btn btn-neutral float-right" title="Workshop P3 - Complex Jobs in Slurm" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Jack Dechow.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>